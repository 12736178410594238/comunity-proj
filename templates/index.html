{% extends "base.html" %}

{% block title %}í™ˆ - ë‚˜ì˜ ì»¤ë®¤ë‹ˆí‹°{% endblock %}

{% block content %}
<div class="hero">
    <h1>í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹</h1>
    <p>FastAPIë¡œ ë§Œë“  ì»¤ë®¤ë‹ˆí‹°ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</p>
    <div class="hero-buttons">
        <a href="/posts" class="btn btn-primary">ê²Œì‹œê¸€ ë³´ê¸°</a>
        <a href="/register" class="btn btn-secondary" id="hero-register-btn">íšŒì›ê°€ì…</a>
    </div>
</div>

<section class="features">
    <h2>ì£¼ìš” ê¸°ëŠ¥</h2>
    <div class="feature-grid">
        <div class="feature-card">
            <span class="feature-icon">ğŸ“</span>
            <h3>ê²Œì‹œê¸€ ì‘ì„±</h3>
            <p>ììœ ë¡­ê²Œ ê¸€ì„ ì‘ì„±í•˜ê³  ê³µìœ í•˜ì„¸ìš”.</p>
        </div>
        <div class="feature-card">
            <span class="feature-icon">ğŸ’¬</span>
            <h3>ëŒ“ê¸€</h3>
            <p>ë‹¤ë¥¸ ì‚¬ëŒì˜ ê¸€ì— ì˜ê²¬ì„ ë‚¨ê²¨ë³´ì„¸ìš”.</p>
        </div>
        <div class="feature-card">
            <span class="feature-icon">â¤ï¸</span>
            <h3>ì¢‹ì•„ìš”</h3>
            <p>ë§ˆìŒì— ë“œëŠ” ê¸€ì— ì¢‹ì•„ìš”ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
        </div>
        <div class="feature-card">
            <span class="feature-icon">ğŸ”</span>
            <h3>ê²€ìƒ‰</h3>
            <p>ì›í•˜ëŠ” ê²Œì‹œê¸€ì„ ì‰½ê²Œ ì°¾ì•„ë³´ì„¸ìš”.</p>
        </div>
    </div>
</section>

<section class="recent-posts">
    <h2>ìµœì‹  ê²Œì‹œê¸€</h2>
    <div id="recent-posts-list">
        <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë¡œë“œ -->
        <p class="loading">ë¡œë”© ì¤‘...</p>
    </div>
    <a href="/posts" class="btn btn-outline">ë” ë³´ê¸°</a>
</section>
{% endblock %}

{% block scripts %}
<script>
    // ìµœì‹  ê²Œì‹œê¸€ ë¡œë“œ
    async function loadRecentPosts() {
        try {
            const response = await fetch('/api/posts?limit=5');
            const posts = await response.json();
            
            const container = document.getElementById('recent-posts-list');
            
            if (posts.length === 0) {
                container.innerHTML = '<p class="empty">ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            container.innerHTML = posts.map(post => `
                <div class="post-preview" onclick="location.href='/posts/${post.id}'">
                    <span class="post-category">${post.category}</span>
                    <h3>${post.title}</h3>
                    <div class="post-meta">
                        <span>${post.author.nickname || post.author.username}</span>
                        <span>ì¡°íšŒ ${post.view_count}</span>
                        <span>ğŸ’¬ ${post.comment_count}</span>
                    </div>
                </div>
            `).join('');
        } catch (error) {
            console.error('ê²Œì‹œê¸€ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
    }
    
    loadRecentPosts();
</script>
{% endblock %}